<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RealKonnect.com ‚Äî Investor Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    html, body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }
  </style>
  
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo } = React;
    const PRICE_PER_LEAD = 40;
    const REFERRAL_CREDIT = 40;
    const fmt = (n) => n.toLocaleString(undefined, { minimumFractionDigits: 0 });

    const Badge = ({ children }) => (
      <span className="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200">
        {children}
      </span>
    );

    const Card = ({ children, className = "" }) => (
      <div className={"rounded-2xl shadow-sm border border-gray-200 bg-white " + className}>{children}</div>
    );

    const CardBody = ({ children, className = "" }) => (
      <div className={"p-4 md:p-6 " + className}>{children}</div>
    );

    const Input = ({ label, ...props }) => (
      <label className="block">
        <span className="text-sm text-gray-700">{label}</span>
        <input {...props} className="mt-1 w-full rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" />
      </label>
    );

    const Select = ({ label, children, ...props }) => (
      <label className="block">
        <span className="text-sm text-gray-700">{label}</span>
        <select {...props} className="mt-1 w-full rounded-xl border border-gray-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
          {children}
        </select>
      </label>
    );

    const Textarea = ({ label, ...props }) => (
      <label className="block">
        <span className="text-sm text-gray-700">{label}</span>
        <textarea {...props} className="mt-1 w-full rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" />
      </label>
    );

    const Button = ({ children, className = "", ...props }) => (
      <button {...props}
        className={(props.disabled ? "bg-gray-100 text-gray-400 border-gray-200 " : "bg-indigo-600 text-white border-indigo-600 hover:bg-indigo-700 ") +
                    "inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 font-semibold shadow-sm border transition active:scale-[.99] " + className}>
        {children}
      </button>
    );

    const GhostButton = ({ children, className = "", ...props }) => (
      <button {...props} className={"inline-flex items-center gap-2 rounded-xl px-3 py-2 font-medium text-gray-700 hover:bg-gray-100 border border-transparent " + className}>
        {children}
      </button>
    );

    const seedLeads = [
      { id: "L-1001", title: "Qualified buyer seeking 3BR townhouse", type: "Buyer", city: "Toronto, ON", price: "$850k‚Äì$1.0M", notes: "Mortgage pre-approved. Wants quick close (<45 days).", postedBy: "aaron@brokerage.ca", sold: false },
      { id: "L-1002", title: "Seller lead ‚Äî detached 4BR in Riverbend", type: "Seller", city: "Calgary, AB", price: "$720k", notes: "Needs evaluation + staging. Moving for job; flexible timeline.", postedBy: "nina@repros.ca", sold: false },
      { id: "L-1003", title: "Investor looking for duplex (cap > 5.5%)", type: "Buyer", city: "Ottawa, ON", price: "$900k‚Äì$1.2M", notes: "Prefers turnkey. West end.", postedBy: "mike@maplerealty.ca", sold: false },
    ];

    const referralData = [
      { name: "John Smith", email: "john@example.com", date: "2025-09-01", credit: 40 },
      { name: "Sara Lee", email: "sara@example.com", date: "2025-09-05", credit: 40 }
    ];

    function App() {
      const [view, setView] = useState("landing");
      const [user, setUser] = useState(null);
      const [leads, setLeads] = useState(seedLeads);
      const [purchases, setPurchases] = useState([]);
      const [flash, setFlash] = useState(null);

      const metrics = useMemo(() => {
        const total = leads.length;
        const sold = leads.filter(l => l.sold).length;
        const available = total - sold;
        const gmv = purchases.length * PRICE_PER_LEAD;
        return { total, sold, available, gmv };
      }, [leads, purchases]);

      const handleSignup = (e) => {
        e.preventDefault();
        const data = Object.fromEntries(new FormData(e.currentTarget));
        const { name, email, password, creaId } = data;
        const validCrea = /^CREA-\d{6}$|^[A-Z0-9]{6,10}$/i.test(creaId || "");
        if (!validCrea) {
          setFlash({ type: "error", msg: "Invalid CREA ID format. Example: CREA-123456" });
          return;
        }
        setUser({ name, email, creaId });
        setView("dashboard");
        setFlash({ type: "ok", msg: "Account created. REALTOR¬Æ status pending verification." });
      };

      const handleLogin = (e) => {
        e.preventDefault();
        const data = Object.fromEntries(new FormData(e.currentTarget));
        if (!data.email || !data.password) {
          setFlash({ type: "error", msg: "Enter email and password." });
          return;
        }
        setUser({ name: data.email.split("@")[0], email: data.email, creaId: "CREA-000000" });
        setView("dashboard");
        setFlash({ type: "ok", msg: "Welcome back!" });
      };

      const signOut = () => { setUser(null); setView("landing"); };

      const postLead = (lead) => {
        const id = `L-${1000 + leads.length + 1}`;
        setLeads([{ id, sold: false, postedBy: user?.email, ...lead }, ...leads]);
        setView("marketplace");
        setFlash({ type: "ok", msg: "Lead posted successfully." });
      };

      const buyLead = (id) => {
        setLeads(prev => prev.map(l => l.id === id ? { ...l, sold: true } : l));
        const bought = leads.find(l => l.id === id);
        setPurchases(p => [{ leadId: id, title: bought?.title, city: bought?.city, ts: new Date().toISOString() }, ...p]);
        setFlash({ type: "ok", msg: `Purchased lead for $${PRICE_PER_LEAD}.` });
      };

      return (
        <div className="min-h-screen bg-gray-50">
          <TopNav user={user} onNav={setView} onSignOut={signOut} />

          <main className="max-w-6xl mx-auto px-4 md:px-6 lg:px-8 py-6 md:py-10">
            {flash && (
              <div className={`mb-6 rounded-2xl border p-3 text-sm ${flash.type === "ok" ? "bg-green-50 text-green-800 border-green-200" : "bg-red-50 text-red-800 border-red-200"}`}>
                {flash.msg}
              </div>
            )}

            {view === "landing" && <Landing onGetStarted={() => setView("signup")} />}
            {view === "login" && <Login onSubmit={handleLogin} />}
            {view === "signup" && <Signup onSubmit={handleSignup} />}
            {view === "dashboard" && <Dashboard metrics={metrics} onGoMarketplace={() => setView("marketplace")} />}
            {view === "marketplace" && <Marketplace leads={leads} onBuy={buyLead} />}
            {view === "postLead" && <PostLead onSubmit={postLead} onCancel={() => setView("marketplace")} />}
            {view === "purchases" && <Purchases purchases={purchases} />}
            {view === "referrals" && <Referrals data={referralData} />}
          </main>

          {user ? <FloatingActions onPost={() => setView("postLead")} onBuy={() => setView("marketplace")} /> : null}
          <Footer />
        </div>
      );
    }

    function TopNav({ user, onNav, onSignOut }) {
      return (
        <header className="sticky top-0 z-30 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 border-b border-gray-200">
          <div className="max-w-6xl mx-auto px-4 md:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div className="flex items-center gap-3">
             <div className="h-15 w-15 rounded-xl bg-white grid place-items-center"><img src="./logo2.png" alt="Logo" className="w-14 h-14" /></div><div>
                <div className="font-bold text-gray-900">RealKonnect.com</div>
                <div className="text-xs text-gray-500 -mt-0.5">$40/lead ¬∑ Investor demo</div>
              </div>
            </div>
            <nav className="flex items-center gap-2">
              {user ? (<>
                  <GhostButton onClick={() => onNav("dashboard")}>üè† Dashboard</GhostButton>
                  <GhostButton onClick={() => onNav("marketplace")}>üõí Marketplace</GhostButton>
                  <GhostButton onClick={() => onNav("postLead")}>‚ûï Post Lead</GhostButton>
                  <GhostButton onClick={() => onNav("purchases")}>üí≥ Purchases</GhostButton>
                  <GhostButton onClick={() => onNav("referrals")}>üéÅ Referrals</GhostButton>
                  <div className="h-6 w-px bg-gray-200 mx-1" />
                  <GhostButton onClick={onSignOut}>‚Ü©Ô∏é Sign out</GhostButton>
                </>)
                : (<>
                    <Button onClick={() => onNav("login")} className="hidden md:inline-flex">Log in</Button>
                    <Button onClick={() => onNav("signup")} className="bg-gray-900 border-gray-900 hover:bg-black">Create account</Button>
                  </>)
              }
            </nav>
          </div>
        </header>
      );
    }

    function Landing({ onGetStarted }) {
      return (
        <section className="text-center">
          <h1 className="text-3xl md:text-5xl font-extrabold tracking-tight text-gray-900">
            Buy & sell real estate leads ‚Äî flat <span className="text-indigo-600">$40</span> per lead
          </h1>
          <p className="max-w-2xl mx-auto mt-4 text-gray-600">
            A simple marketplace where verified Canadian REALTORS¬Æ post qualified buyer & seller leads, and agents purchase them at a fixed price.
          </p>
          <div className="mt-8 flex items-center justify-center gap-3">
            <Button onClick={onGetStarted}>Create account</Button>
            <GhostButton onClick={() => alert('This is a demo ‚Äî no backend yet.')}>See how it works</GhostButton>
          </div>
        </section>
      );
    }

    function Login({ onSubmit }) {
      return (
        <Card className="max-w-md mx-auto">
          <CardBody>
            <h2 className="text-xl font-bold">Log in</h2>
            <p className="text-sm text-gray-600 mb-4">Welcome back ‚Äî enter your credentials.</p>
            <form onSubmit={onSubmit} className="grid gap-3">
              <Input name="email" type="email" label="Email" placeholder="you@brokerage.ca" />
              <Input name="password" type="password" label="Password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
              <Button type="submit" className="mt-2 w-full">Log in</Button>
            </form>
          </CardBody>
        </Card>
      );
    }

    function Signup({ onSubmit }) {
      return (
        <Card className="max-w-md mx-auto">
          <CardBody>
            <h2 className="text-xl font-bold">Create account</h2>
            <p className="text-sm text-gray-600 mb-4">For Canadian REALTORS¬Æ only. CREA ID required.</p>
            <form onSubmit={onSubmit} className="grid gap-3">
              <Input name="name" label="Full name" placeholder="Alex Morgan" />
              <Input name="email" type="email" label="Email" placeholder="you@brokerage.ca" />
              <Input name="password" type="password" label="Password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
              <Input name="creaId" label="CREA ID" placeholder="CREA-123456" />
              <div className="text-xs text-gray-500 -mt-2">
                Demo-only validation. In production we would verify via the REALTOR¬Æ membership API.
              </div>
              <Button type="submit" className="mt-1 w-full">Create account</Button>
            </form>
          </CardBody>
        </Card>
      );
    }

    function Dashboard({ metrics, onGoMarketplace }) {
      return (
        <section>
          <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
            <div>
              <h2 className="text-2xl font-bold">Dashboard</h2>
              <p className="text-sm text-gray-600">Key metrics for investors and operators.</p>
            </div>
            <Button onClick={onGoMarketplace}>Go to Marketplace</Button>
          </div>
          <div className="grid md:grid-cols-4 gap-4 mt-5">
            <MetricTile label="Leads listed" value={metrics.total} />
            <MetricTile label="Leads sold" value={metrics.sold} />
            <MetricTile label="Available" value={metrics.available} />
            <MetricTile label="GMV (demo)" value={"$" + fmt(metrics.gmv)} />
          </div>
          <Card className="mt-6"><CardBody>
            <div className="flex items-center gap-3">
              <div className="text-indigo-600 text-xl">‚úÖ</div>
              <div>
                <div className="font-semibold">Compliance & Trust</div>
                <p className="text-sm text-gray-600">
                  Signups are gated by CREA ID. Payments are per-lead with clear receipts. Buyer-seller chat and escrow can be added next.
                </p>
              </div>
            </div>
          </CardBody></Card>
        </section>
      );
    }

    function MetricTile({ label, value }) {
      return (
        <Card><CardBody>
          <div className="text-sm text-gray-500">{label}</div>
          <div className="text-2xl font-extrabold mt-1">{value}</div>
        </CardBody></Card>
      );
    }

    function Marketplace({ leads, onBuy }) {
      const [q, setQ] = useState("");
      const filtered = useMemo(() => {
        const s = q.trim().toLowerCase();
        if (!s) return leads;
        return leads.filter(l => [l.title, l.type, l.city, l.price, l.notes].some(x => x.toLowerCase().includes(s)));
      }, [q, leads]);

      return (
        <section>
          <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
            <div>
              <h2 className="text-2xl font-bold">Marketplace</h2>
              <p className="text-sm text-gray-600">Browse qualified leads posted by verified agents. Flat price: ${PRICE_PER_LEAD}/lead.</p>
            </div>
            <div className="flex items-center gap-2">
              <input value={q} onChange={(e) => setQ(e.target.value)} placeholder="Search city, type, price‚Ä¶" className="w-full md:w-72 rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" />
            </div>
          </div>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-5">
            {filtered.map(l => (
              <Card key={l.id}><CardBody>
                <div className="flex items-start justify-between gap-3">
                  <div>
                    <div className="font-semibold text-gray-900">{l.title}</div>
                    <div className="mt-1 flex items-center gap-2 text-sm text-gray-600">
                      <Badge>{l.type}</Badge>
                      <div className="inline-flex items-center gap-1">üìç {l.city}</div>
                      <div className="inline-flex items-center gap-1">üíµ {l.price}</div>
                    </div>
                  </div>
                  <Badge>{l.id}</Badge>
                </div>
                <p className="mt-3 text-sm text-gray-700">{l.notes}</p>
                <div className="mt-4 flex items-center justify-between">
                  <div className="text-sm text-gray-500">Posted by {l.postedBy}</div>
                  <Button onClick={() => onBuy(l.id)} disabled={l.sold} className={l.sold ? "bg-gray-100 border-gray-200 text-gray-400" : ""}>
                    {l.sold ? "Sold" : `Buy for $${PRICE_PER_LEAD}`}
                  </Button>
                </div>
              </CardBody></Card>
            ))}
          </div>
          {filtered.length === 0 && (<div className="text-center text-gray-500 mt-10">No leads match your search.</div>)}
        </section>
      );
    }

    function PostLead({ onSubmit, onCancel }) {
      const [form, setForm] = useState({ title: "", type: "Buyer", city: "", price: "", notes: "" });
      const update = (k, v) => setForm(f => ({ ...f, [k]: v }));
      const submit = (e) => { e.preventDefault(); if (!form.title || !form.city || !form.price) return; onSubmit(form); };

      return (
        <Card className="max-w-2xl mx-auto"><CardBody>
          <h2 className="text-xl font-bold">Post a lead</h2>
          <p className="text-sm text-gray-600 mb-4">Describe the opportunity. Other REALTORS¬Æ can purchase for ${PRICE_PER_LEAD}.</p>
          <form onSubmit={submit} className="grid gap-3">
            <Input label="Headline" placeholder="Qualified buyer seeking 3BR townhouse" value={form.title} onChange={(e) => update("title", e.target.value)} />
            <div className="grid md:grid-cols-2 gap-3">
              <Select label="Lead type" value={form.type} onChange={(e) => update("type", e.target.value)}>
                <option>Buyer</option><option>Seller</option><option>Investor</option>
              </Select>
              <Input label="City/Province" placeholder="Toronto, ON" value={form.city} onChange={(e) => update("city", e.target.value)} />
            </div>
            <Input label="Price / Budget" placeholder="$800k‚Äì$1.1M" value={form.price} onChange={(e) => update("price", e.target.value)} />
            <Textarea label="Notes" rows={4} placeholder="Pre-approved. Wants west end. Can close in 45 days." value={form.notes} onChange={(e) => update("notes", e.target.value)} />
            <div className="flex items-center gap-3 mt-1">
              <Button type="submit">Publish lead</Button>
              <GhostButton type="button" onClick={onCancel}>Cancel</GhostButton>
            </div>
          </form>
        </CardBody></Card>
      );
    }

    function Purchases({ purchases }) {
      return (
        <section>
          <h2 className="text-2xl font-bold">Your purchases</h2>
          <p className="text-sm text-gray-600">Each item below represents a purchased lead (demo only).</p>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-5">
            {purchases.map(p => (
              <Card key={p.ts}><CardBody>
                <div className="flex items-start justify-between">
                  <div>
                    <div className="font-semibold">{p.title}</div>
                    <div className="text-sm text-gray-600 mt-1 flex items-center gap-2">
                      <Badge>Lead</Badge>
                      <span>üìç {p.city}</span>
                      <span>${PRICE_PER_LEAD}</span>
                    </div>
                  </div>
                  <Badge>{new Date(p.ts).toLocaleString()}</Badge>
                </div>
              </CardBody></Card>
            ))}
          </div>
          {purchases.length === 0 && (<div className="text-center text-gray-500 mt-10">No purchases yet.</div>)}
        </section>
      );
    }

    function Referrals({ data }) {
      const totalReferrals = data.length;
      const totalCredit = totalReferrals * REFERRAL_CREDIT;
      const referralLink = "https://realkonnect.com/ref/abc123";

      const copyLink = () => {
        navigator.clipboard.writeText(referralLink);
        alert("Referral link copied!");
      };

      return (
        <section>
          <h2 className="text-2xl font-bold">Referrals</h2>
          <p className="text-sm text-gray-600 mb-4">Invite friends and earn ${REFERRAL_CREDIT} credit for each signup.</p>

          <Card><CardBody>
            <div className="flex items-center justify-between">
              <div>
                <div className="text-sm text-gray-500">Your referral link</div>
                <div className="font-mono text-sm mt-1">{referralLink}</div>
              </div>
              <Button onClick={copyLink}>Copy</Button>
            </div>
          </CardBody></Card>

          <div className="grid md:grid-cols-2 gap-4 mt-5">
            <Card><CardBody>
              <div className="text-sm text-gray-500">Total Referrals</div>
              <div className="text-2xl font-extrabold mt-1">{totalReferrals}</div>
            </CardBody></Card>
            <Card><CardBody>
              <div className="text-sm text-gray-500">Total Credit</div>
              <div className="text-2xl font-extrabold mt-1">${totalCredit}</div>
            </CardBody></Card>
          </div>

          <h3 className="mt-8 font-semibold">Referred Users</h3>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-3">
            {data.map(r => (
              <Card key={r.email}><CardBody>
                <div className="font-semibold">{r.name}</div>
                <div className="text-sm text-gray-600">{r.email}</div>
                <div className="text-xs text-gray-400 mt-1">Joined {r.date}</div>
              </CardBody></Card>
            ))}
          </div>
        </section>
      );
    }

    function FloatingActions({ onPost, onBuy }) {
      return (
        <div className="fixed bottom-6 right-6 flex flex-col gap-2">
          <Button onClick={onPost} className="shadow-lg">‚ûï Post lead</Button>
          <Button onClick={onBuy} className="shadow-lg bg-gray-900 border-gray-900 hover:bg-black">üõí Buy leads</Button>
        </div>
      );
    }

    function Footer() {
      return (
        <footer className="mt-16 pb-10 text-center text-xs text-gray-500">
          ¬© {new Date().getFullYear()} RealKonnect.com ¬∑ Demo only ¬∑ Payments & CREA verification mocked
        </footer>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
